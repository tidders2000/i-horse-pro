{% extends 'base.html' %}{% load static%} {% load materializecss %}{% block page_title %}Home{% endblock %}
     

     
     {% block content %}
        <link rel="stylesheet" href="{% static 'css/form.css' %}"> 
        <link rel="stylesheet" href="{% static 'css/jquery.datetimepicker.min.css' %}"> 


     
{% comment %} <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  {% endcomment %}

 
 <style>.date label{margin-top: -30px!important;}.obj-form input{color:black!important;} form{color:white!important;}
  .card-action a{
    color:#0288d1!important;
   background-color:white;
  }
.card_text{
 font-weight: 700;
 text-transform:uppercase;
 color:black
}
label{
  margin-top:-20px;
}
 .card-panel,.card{
     border-radius:10px;
   }

   .tabs li a{
     color:#0288d1!important;
   }
   .indicator{
       background-color:white!important;
       margin-top:5px;
   }

   nav{
       background-color:black!important;
   }

   .caret{
       color:white!important;
   }
   .material-icons{
       {% comment %} font-size:40px; {% endcomment %}
       color:white;
       padding-top:10px;
   }
   .session_title{
       font-size:40px;
       color:white;
       text-align:center;
       font-weight:600;

   }

   button{
       border-radius:10px;
       background-colour:#21a3e2!important;
   }

   .i_color{
       color:#21a3e2!important;
      
   }


   ::-webkit-calendar-picker-indicator {
     filter: invert(1);
 }

 label{
     text-size:1 rem!important;
     font-family: 'Roboto', 'Helvetica', sans-serif;
 }


.file-field .btn{
     display:none;
 }
 .file-path-wrapper{
     display:none;
 }

 button{
     border-radius:10px;
 }


.fa-trophy{
color: white;
font-size: 20px;
 }
select{
 background-color: #212121!important;
}

.report{
  margin-top:20px;
  height:100px;
  width:100px;
}

.report_para{
  color:#0288d1;
  margin-left:10px;
}

#id_image{
  margin-left:10px;
}

</style>
  <nav>
    <div class="nav-wrapper">
      <div class="col s12 breadcrumb">
        <a href="{% url 'home' %}" class="breadcrumb">Home</a>
       <a href="javascript:history.back()" class="breadcrumb">View Horse</a>
        <a href="#!" class="breadcrumb">Appointment</a>
       
      </div>
    </div>
  </nav>
  <div class="nativeCal" >
     {% if instance %}
    <a href="{% url 'EventFeed' instance.pk %}"><i class="fa fa-calendar-plus-o" aria-hidden="true"></i> Add To Calendar</a>
    {%endif%}
    </div>
  <div class="card-panel grey darken-4">
    {% comment %} <a href="{% url 'EventFeed' %}"><i class="fa fa-calendar-plus-o" aria-hidden="true"></i> Add To Calendar</a> {% endcomment %}

<div class="nativeCal" style="display:{{display}};">



</div>
 <form method="POST" enctype="multipart/form-data">
  <div class="row">
          
    {% if messages %}

    {% for message in messages %}
    
    <script>Materialize.toast('{{message}}', 4000)</script>
    
    
    
    </div>
    {% endfor %}
    
    {% endif%} 
    <div class="col s2"><span class="material-icons ">
       event
        </span></div>
        
    <div class="col s8 session_title"><h4> {% if instance%}Edit {%else%}Add{%endif%} Appointment for {{horse.stableName}} </h4></div>
    <div class="col s2">

      <button type="submit" value="Upload"  data-position="bottom" data-tooltip="Click to Save" name="save_photo" class="save-button">  <span><i class="fas fa-save" style="padding-right:0!important;"></i><br>SAVE</span></button></div>
              
          {{form|materializecss}}
        {% csrf_token %} 
        <p class="report_para"> Add a report</p>
        <input id="id_image" name="id_image"  type="file"   >
        <div class="row">
          {% if instance.report %}
          <div class="col s3 materialboxed ">
            <a href="{{MEDIA_URL}}{{ instance.report }}" class="report ">{{ instance.report }}</a>
         
          {% else %}
          <p>No files added</p>
          {% endif %}
        </div>
        {% if instance%}
        <button type="button" class="btn red darken-2" onclick="location.href='{% url 'deleteAppointment' instance.pk %}'">Delete
          Appointment</button>

          {% endif %}
      

      </div>
    
                     </form>


 
                    </div>


   <script>
$(document).ready(function(){

  // Initialize materialize data picker
  //  $('#id_due').datepicker({'format': 'dd/mm/yy,H:i'}) 
 
  $('select').material_select();
  //  $('#id_due').timepicker() 
  

function goBack() {
  window.history.back();
}


  });
</script>

<!-- <script>
if (navigator.serviceWorker) {
    navigator.serviceWorker.ready.then(function(registration) {
        if (registration.sync && window.URLSearchParams && window.FormData) {
            var frm = document.querySelector("form")
            frm.addEventListener("submit", function(e) {
                e.preventDefault();
                saveData(new URLSearchParams(new FormData(frm)).toString(),
                    "{% url 'editapp' %}?app={{instance.pk}}&horse={{horse.pk}}")
                    .then(function() {
                        return registration.sync.register('appoint-post');
                    }).then(function() {
                        location.href = "{% url 'editapp' %}?app={{instance.pk}}&horse={{horse.pk}}";
                    }).catch(function(err) {
                        console.error(err);
                    })
            }, false);
        }
    })
}
function saveData(data, post_url) {
    return new Promise(function(resolve, reject) {
        var db = window.indexedDB.open("appoint");
        db.onupgradeneeded = function(event) {
            var db = event.target.result;
            var store = db.createObjectStore("appoint", { autoIncrement: true });
        }
        db.onsuccess = function(event) {
            var store = this.result.transaction('appoint', 'readwrite').objectStore('appoint');
            store.add({url: post_url, data: data});
            resolve();
        }
        db.onerror = function(err) { reject(err); }
    })
}

</script>  -->

{%endblock%}

